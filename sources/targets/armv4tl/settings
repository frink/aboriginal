KARCH=arm
KERNEL_PATH=arch/${KARCH}/boot/zImage
GCC_FLAGS="--with-march=armv4t --with-float=soft --disable-sjlj-exceptions"
BINUTILS_FLAGS=
QEMU_TEST=$KARCH

CROSS_TARGET=armv4tl-unknown-linux-gnueabi

ROOT=sda
CONSOLE=ttyAMA0

# This is every bit as ugly as it looks, because it's for gcc.
export target_cpu_cname=arm9tdmi

# Gentoo from Scratch
GFS_CHOST="$CROSS_TARGET"
GFS_ARCH="$KARCH"

UCLIBC_CONFIG="
TARGET_arm=y
CONFIG_ARM_EABI=y
ARCH_WANTS_LITTLE_ENDIAN=y
DOPIC=y
"

LINUX_CONFIG="
#CONFIG_CPU_ARM920T=y
CONFIG_CPU_ARM926T=y
CONFIG_MMU=y
CONFIG_ARCH_VERSATILE_PB=y
#CONFIG_MACH_VERSATILE_AB=y
CONFIG_ARM_THUMB=y
CONFIG_VFP=y
CONFIG_PCI_LEGACY=y
CONFIG_AEABI=y
CONFIG_SERIAL_NONSTANDARD=y
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y
CONFIG_RTC_DRV_PL031=y
"

emulator_command()
{
  echo qemu-system-arm -M versatilepb $(qemu_defaults "$@") \
    -net nic,model=rtl8139 -net user
}
